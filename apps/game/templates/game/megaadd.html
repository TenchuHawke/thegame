<!DOCTYPE html>
<html>
{% load static %}

<head>
    <meta charset="utf-8">
    <title>MegaAdd</title>
    <link rel="stylesheet" type="text/css" href="{% static 'game/css/megaadd.css' %}" />
    <script src="{% static 'game/js/megaadd.js' %}"></script>
</head>

<body>
    <div id="loginblock">
        {% if request.session.user_id %}
        <p></p>
        Hello {{request.session.username}} {# TODO logged in logic#}
        <p></p>
        <p></p>
        <form action="/Login/logout/" method="post">
            {% csrf_token %}
            <button type="submit" name="login">Log out</button>

        </form>
        {% else %}
        <p></p>
        <p>Please Log in</p>
        <p></p>
        <p></p>
        {# TODO not logged in logic#}
        <form action="login" method="post">
            {% csrf_token %}
            <button type="submit" name="login">Log in</button>

        </form>
        {% endif %}
    </div>
    <h2>Users</h2>
    <form class="box" action="game/updateCharacter" method="post">
        
        {% csrf_token %}
        <!-- #TODO (add user function) -->
        <button type="submit" name="button">add user</button>
        <table>
            <tr>
                <th>Name</th>
                <th>E-Mail</th>
                <th>User Level</th>
                <th>Characters</th>

            </tr>
            {% for user in users %}
            <tr>
                <td>{{user.username}}</td>
                <td>{{user.email}}</td>
                <td>{{user.userlevel}}</td>
                <td>
                    <table>
                        {% for character in characters %}
                        <tr>
                            <td>
                                {% if character.owned_by == user %} {{character.name}} {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </table>
                </td>
            </tr>
            {% endfor %}
        </table>
    </form>
    <h2>Characters</h2>
    <form class="box" action="{% url 'Mainmenu:create' %}" method="post">
        {% csrf_token %}
        <div id="inputfield">

            <table>
                <tr>
                    <td align="left">Name: </td>
                    <td align="right"><input type="text" name="char_name" class="boxa"></td>
                </tr>
                <tr>
                    <td align="left">Class: </td>
                    <td align="right"><select name="add_class">
        					<option value="FI">Fighter (+5 strength)</option>
        					<option value="RO">Rogue (+5 dexterity)</option>
        					<option value="WI">Wizard (+5 intelligence)</option>
        				</select></td>
                </tr>
                <tr>
                    <td width=100px>Base Stats: (No mods) </td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td align="right">Strength: <input type="text" name="strength" value="1"></td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td align="right">Dexterity:<input type="text" name="dext" value="1"></td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td align="right">Intelligence:<input type="text" name="intel" value="1"></td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td align="right">Health:<input type="text" name="health" value="1"></td>
                </tr>
                <tr>
                    <td align="left">Owned By:</td><td align="right"><select name="owned_by">
                    {%for user in users%}
                    <option value={{user.id}}>{{user.username}}

                    </option>
                    {% endfor %}

                </select>
                </td>
                </tr>
            </table>
            <br>
        </div>
        <div id="fieldlist">

        </div>
        <button type="submit" name="button">add Character</button>
        <table>
            <tr>
                <th>Name</th>
                <th>Class</th>
                <th>Strength</th>
                <th>Dexterity</th>
                <th>Intelligence</th>
                <th>Health</th>
                <th>Gold</th>
                <th>Level</th>
                <th>Owned By</th>
            </tr>
            {% for character in characters %}
            <tr>
                <td>{{character.name}}</td>
                <td>{{character.cclass}}</td>
                <td>{{character.strength}}</td>
                <td>{{character.dexterity}}</td>
                <td>{{character.intelligence}}</td>
                <td>{{character.health}}</td>
                <td>{{character.gold}}</td>
                <td>{{character.level}}</td>
                <td>{{character.owned_by.username}}</td>
            </tr>
            {% endfor %}
        </table>
    </form>
    <h2>Monsters</h2>
    <form class="box" action="add_monster" method="post">
        <table>
            <tr>
                <td align="left">Name: </td>
                <td align="right"><input type="text" name="name"></td>
            </tr>
            <tr>
                <td align="left">Class: </td>
                <td align="right"><select name="mclass">
                    <option value="BR">Brute (+5 Strength)</option>
                    <option value="AS">Assasin (+5 Dexterity)</option>
                    <option value="MA">Mage (+5 Intelligence)</option>
                    <option value="EL">Elite (+5 All Stats)</option>
                </select></td>
            </tr>
            <tr>
                <td align="left">Alive?: </td>
                <td align="right"><select name="alive">
                <option value="True">True</option>
                <option value="False">False</option>
                </select></td>
            </tr>
            <tr>
                    <td width=100px>Base Stats: (No mods) </td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td align="right">Strength: <input type="text" name="strength" value="1"></td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td align="right">Dexterity:<input type="text" name="dexterity" value="1"></td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td align="right">Intelligence:<input type="text" name="intelligence" value="1"></td>
                </tr>
                <tr>
                    <td align="left"></td>
                    <td align="right">Health:<input type="text" name="health" value="1"></td>
                </tr>
            <tr>
                <td align="left">Image: </td>
                <td align="right"><input type="text" name="image"></td>
            </tr>
        </table>
         {% csrf_token %}
        <button type="submit" name="button">add Monster</button>
    </form>
        <table>
            <tr>
                <th>Name</th>
                <th>Class</th>
                <th>Strength</th>
                <th>Dexterity</th>
                <th>Intelligence</th>
                <th>Health</th>
                <th>alive</th>
            </tr>
            {% for monster in monsters %}
            <tr>
                <td>{{monster.name}}</td>
                <td>{{monster.mclass}}</td>
                <td>{{monster.strength}}</td>
                <td>{{monster.dexterity}}</td>
                <td>{{monster.intelligence}}</td>
                <td>{{monster.health}}</td>
                <td>{{monster.image}}</td>
            </tr>
            {% endfor %}
        </table>
  
    <h2>Items</h2>
    <form class="box" action="add_item" method="post">
        <table>
            <tr>
                <td align="left">Name: </td>
                <td align="right"><input type="text" name="name"></td>
            </tr>
            <tr>
                <td align="left">Star Bonus: </td>
                <td align="right"><input type="number" name="strbonus"></td>
            </tr>
            <tr>
                <td align="left">Dexterity Bonus: </td>
                <td align="right"><input type="number" name="dexbonus"></td>
            </tr>
            <tr>
                <td align="left">Intelligence Bonus:</td>
                <td align="right"><input type="number" name="intbonus"></td>
            </tr>
            <tr>
                <td align="left">Health Bonus: </td>
                <td align="right"><input type="number" name="hthbonus"></td>
            </tr>
            <tr>
                <td align="left">Consumeable?: </td>
                <td align="right"><select name="consumeable">
                <option value="False">False</option>
                <option value="True">True</option>
                </select></td>
            </td>
        </table>
        {% csrf_token %}
        <button type="submit" name="button">add Items</button>
    </form>
        <table>
            <tr>
                <th>Name</th>
                <th>Str Bonus</th>
                <th>Dex Bonus</th>
                <th>Int Bonus</th>
                <th>Health Bonus</th>
                <th>consumeable</th>
            </tr>
            {% for item in items %}
            <tr>
                <td>{{item.name}}</td>
                <td>{{item.strbonus}}</td>
                <td>{{item.dexbonus}}</td>
                <td>{{item.intbonus}}</td>
                <td>{{item.hthbonus}}</td>
                <td>{{item.consumeable}}</td>
                <td>
                    <table>
                        {% for owners in Items.owned_by %}
                        <tr>
                            {{owners.name}}
                        </tr>
                        {% endfor %}
                    </table>
                </td>
            </tr>
            {% endfor %}
        </table>
   
    <h2>Treasure</h2>
    <form class="box" action="add_Treasure" method="post">
        <table>
            <tr>
                <td align="left">Name: </td>
                <td align="right"><input type="text" name="name"></td>
            </tr>
            <tr>
                <td align="left">Gold: </td>
                <td align="right"><input type="number" name="gold"></td>
            </tr>
            <tr>
                <td align="left">Item: </td>
                <td align="right"><select name="item">{% for items in items %}
                    <option value="{{items.id}}">{{items.name}}</option>{% endfor %}
                    </select></td>
            </tr>
        </table>
        {% csrf_token %}
        <button type="submit" name="button">add Treasure</button>
        <table>
            <tr>
                <th>Name</th>
                <th>Gold</th>
                <th>Item</th>
                <th>Location</th>
            </tr>
            {% for treasure in treasures %}
            <tr>
                <td>{{treasure.name}}</td>
                <td>{{treasure.gold}}</td>
                <td>{{treasure.item}}</td>
                <!-- #TODO (add treasure rooms) -->
                <!-- <td>{{treasure.rooms__name}}</td> -->
            </tr>
            {% endfor %}
        </table>
    </form>
    <h2>Traps</h2>
    <form class="box" action="add_Trap" method="post">
        <table>
            <tr>
                <td align="left">Name: </td>
                <td align="right"><input type="text" name="name"></td>
            </tr>
            <tr>
                <td align="left">Class: </td>
                <td align="right"><select name="tclass">
                <option value="PZ">Puzzle</option>
                <option value="PS">Poison</option>
                <option value="RF">Reflex</option>
                <option value="CL">Collapse</option>
                </select></td>
            </tr>
            <tr>
                <td align="left">Strength: </td>
                <td align="right"><input type="number" name="strength"></td>
            </tr>
        </table>
        {% csrf_token %}
        <button type="submit" name="button">add Trap</button>
        <table>
            <tr>
                <th>Name</th>
                <th>Class</th>
                <th>Strength</th>
                <th>Location</th>
                <th>Health Bonus</th>
                <th>consumeable</th>
            </tr>
            {% for trap in traps %}
            <tr>
                <td>{{trap.name}}</td>
                <td>{{trap.tclass}}</td>
                <td>{{trap.strength}}</td>
                <td>
                    <table>
                        {% for owners in item.owned_by %}
                        <tr>
                            {{owners.name}}
                        </tr>
                        {% endfor %}
                    </table>
                </td>
            </tr>
            {% endfor %}
        </table>
        <h2>Rooms</h2>
        <form class="box" action="add_room" method="post">
            <table>
                <tr>
                    <td align="left">Name: </td>
                    <td align="right"><input type="text" name="name"></td>
                </tr>
                <tr>
                    <td align="left">Description: </td>
                    <td align="right"><textarea name="description" rows="5"></textarea></td>
                </tr>
                <tr>
                    <td align="left">Monster: </td>
                    <td align="right"><select name="monster">
                    {% for monsters in monsters %}
                    <option name="{{monsters.id}}">{{monsters.name}}</option>
                    {% endfor %}</select></td>
                </tr>
                <tr>
                    <td align="left">Trap: </td>
                    <td align="right"><select name="trap">
                    {% for traps in traps %}
                    <option name="{{traps.id}}">{{traps.name}}</option>
                    {% endfor %}</select></td>
                </tr>
                <tr>
                    <td align="left">Treasure: </td>
                    <td align="right"><select name="treasure">
                    {% for treasure in treasure %}
                    <option name="{{treasure.id}}">{{treasure.name}}</option>
                    {% endfor %}</select></td>
                </tr>
                <tr>
                    <td align="left">Explored By: </td>
                    <td align="right"><select name="explored_by">
                    {% for characters in characters %}
                    <option name="{{characters.id}}">{{characters.name}}</option>
                    {% endfor %}</select></td>
                </tr>
                <tr>
                    <td align="left">Currently In: </td>
                    <td align="right"><select name="currently_in">
                    {% for characters in characters %}
                    <option name="{{characters.id}}">{{characters.name}}</option>
                    {% endfor %}</select></td>
                </tr>
                <tr>
                    <td align="left">Terrain Type: </td>
                    <td align="right"><input type="text" name="terrain_type"></td>
                </tr>
            </table>
            {% csrf_token %}
            <button type="submit" name="button">add Room</button>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Monster</th>
                    <th>Traps</th>
                    <th>Treasures</th>
                    <th>Currently In</th>
                    <th>Explored By</th>
                    <th>Exits</th>
                    <th>Entrances</th>
                </tr>
                <tr>
                    {% for room in rooms %}
                    <td>{{room.name}}</td>
                    <td>{{room.description}}</td>
                    <td>
                        <table>
                            {% for monster in monsters %}
                            <tr>
                                <td>{% if moster.id == room.monster.id %} {{monster.name}}{%endif%}</td>
                            </tr>
                            {% endfor %}
                            <tr> 
                                <td><a href="assign_monster{{room.id}}">Add Monsters</a></td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table>
                            {% for trap in traps %}
                            <tr>
                                <td>{% if trap.id == room.trap.id %} {{trap.name}}{%endif%}</td>
                            </tr>
                            {% endfor %}
                            <tr> 
                                <td><a href="assign_trap{{room.id}}">Add Trap</a></td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table>
                            {% for treasure in treasures %}
                            <tr>
                                <td>{% if treasure.id == room.treasure.id %} {{treasure.name}}{%endif%}</td>
                            </tr>
                            {% endfor %}
                            <tr> 
                                <td><a href="assign_treasure{{room.id}}">Add Treasure</a></td>
                            </tr>
                        </table>
                    </td>
                    {% endfor %}
                </tr>
            </table>
                    
            </table>
        </form>
    </form>
</body>

</html>
